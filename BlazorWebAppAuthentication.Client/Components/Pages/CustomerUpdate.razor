@page "/customer-update"
@page "/customer-update/{CustomerId}"
@using BlazorWebAppAuthentication.Domain

@if (!Saved)
{
    <section class="CustomerUpdateForm">
        <div class="col-lg-6 offset-lg-2 pt-4 pb-4 border mt-2">
            <h3 class="text-center">Customer Update</h3>
            <EditForm Model="@Customer"
                      OnInvalidSubmit="OnInvalidSubmit"
                      OnValidSubmit="OnValidSubmit"
                      FormName="CustomerUpdateForm">
                <DataAnnotationsValidator/>
                <ValidationSummary></ValidationSummary>
                <div class="form-group m-3">
                    <label for="firstName" class="col-sm-3">First name: @Customer.FirstName</label>
                    <InputText id="firstName" class="form-control col-sm-8"
                               @bind-Value="@Customer.FirstName"
                               placeholder="Enter first name">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.FirstName)"/>
                </div>

                <div class="form-group m-3">
                    <label for="lastName" class="col-sm-3">Last name: @Customer.LastName</label>
                    <InputText id="lastName" class="form-control col-sm-8"
                               @bind-Value="@Customer.LastName"
                               placeholder="Enter last name">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.LastName)"/>
                </div>

                <div class="form-group m-3">
                    <label for="email" class="col-sm-3">Email: </label>
                    <InputText id="email" class="form-control col-sm-8"
                               @bind-Value="@Customer.Email"
                               placeholder="Enter email">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.Email)"/>
                </div>
                <div class="form-group m-3">
                    <label for="role" class="col-sm-3">Role: </label>
                    <InputSelect id="role" @bind-Value="Customer.Role" class="form-control">
                        <option value="@(Role.Administrator)">Administrator</option>
                        <option value="@(Role.User)">User</option>
                    </InputSelect>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.MaritalStatus)"/>
                </div>
                <div class="form-group m-3">
                    <label for="birthday" class="col-sm-3">Birthday: </label>
                    <InputDate id="birthday" class="form-control col-sm-8"
                               @bind-Value="@Customer.BirthDate"
                               placeholder="Enter birthday">
                    </InputDate>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.BirthDate)"/>
                </div>

                <div class="form-group m-3">
                    <label for="street" class="col-sm-3">Street: </label>
                    <InputText id="street" class="form-control col-sm-8"
                               @bind-Value="@Customer.Street"
                               placeholder="Enter street">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.Street)"/>
                </div>
                <div class="form-group m-3">
                    <label for="zip" class="col-sm-3">Zip: </label>
                    <InputText id="zip" class="form-control col-sm-8"
                               @bind-Value="@Customer.Zip"
                               placeholder="Enter zip">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.Zip)"/>
                </div>

                <div class="form-group m-3">
                    <label for="city" class="col-sm-3">City: </label>
                    <InputText id="city" class="form-control col-sm-8"
                               @bind-Value="@Customer.City"
                               placeholder="Enter zip">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.City)"/>
                </div>
                <div class="form-group m-3">
                    <label for="phoneNumber" class="col-sm-3">Phone Number: </label>
                    <InputText id="phoneNumber" class="form-control col-sm-8"
                               @bind-Value="@Customer.PhoneNumber"
                               placeholder="Enter phone number">
                    </InputText>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.PhoneNumber)"/>
                </div>
                <div class="form-group m-3">
                    <label for="gender" class="col-sm-3">Gender: </label>
                    <InputSelect id="gender" class="form-control col-sm-8"
                                 @bind-Value="@Customer.Gender"
                                 placeholder="Enter gender">
                        <option value="@(Gender.Male)">Male</option>
                        <option value="@(Gender.Female)">Female</option>
                        <option value="@(Gender.Potato)">Potato</option>
                    </InputSelect>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.Gender)"/>
                </div>

                <div class="form-group m-3">
                    <label for="marital" class="col-sm-3">Marital status: </label>
                    <InputSelect id="marital" @bind-Value="Customer.MaritalStatus" class="form-control">
                        <option value="@(MaritalStatus.Single)">Single</option>
                        <option value="@(MaritalStatus.Married)">Married</option>
                        <option value="@(MaritalStatus.Other)">Other</option>
                    </InputSelect>
                    <ValidationMessage class="offset-sm-3 col-sm-8" For="@(() => Customer.MaritalStatus)"/>
                </div>
                <button type="submit" class="btn btn-primary m-3">Save customer</button>

                @if (Customer.CustomerId > 0)
                {
                    <a class="btn btn-danger" @onclick="@DeleteCustomer">
                        Delete
                    </a>
                }

                <a class="btn btn-outline-primary m-3" @onclick="@NavigateToOverview">Back to overview</a>

            </EditForm>
        </div>
    </section>
} else{
    <div class="alert @StatusClass">
        <span>@Message</span>
    </div>

}